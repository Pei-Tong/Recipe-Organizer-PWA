{"mappings":"IKII,EA0CA,EAAe,E,S,E,C,C,C,C,C,C,C,E,O,c,C,E,E,C,I,E,I,E,W,C,E,a,C,C,E,C,I,E,W,E,C,E,E,C,E,E,E,iB,A,O,I,A,C,E,S,C,E,G,K,E,O,C,C,E,C,O,C,G,K,E,C,I,E,C,C,E,A,Q,C,C,E,C,I,E,C,G,E,Q,C,C,E,O,C,C,E,C,E,E,I,C,E,O,C,E,E,O,E,E,O,A,C,I,E,A,M,uB,E,I,O,E,I,C,mB,C,C,E,Q,C,S,C,C,C,E,C,C,E,C,C,E,E,iB,C,G,I,E,E,Q,C,E,Q,S,C,C,C,E,E,E,O,C,W,I,E,A,G,E,G,E,E,O,C,U,I,E,A,G,E,GJ5CnB,IAgBA,EACA,EAjBI,EAAU,IAAI,IAgBlB,EAfA,SAAkB,CAAO,CAAE,CAAQ,EACjC,IAAK,IAAI,EAAI,EAAG,EAAI,EAAS,MAAM,CAAG,EAAG,GAAK,EAC5C,EAAQ,GAAG,CAAC,CAAQ,CAAC,EAAE,CAAE,CACvB,QAAS,EACT,KAAM,CAAQ,CAAC,EAAI,EAAE,AACvB,EAEJ,EASA,EARA,SAAiB,CAAE,EACjB,IAAI,EAAW,EAAQ,GAAG,CAAC,GAC3B,GAAI,AAAY,MAAZ,EACF,MAAM,AAAI,MAAM,oCAAsC,GAExD,OAAO,IAAI,IAAI,EAAS,IAAI,CAAE,EAAS,OAAO,EAAE,QAAQ,EAC1D,C,G,E,Q,S,C,C,C,E,I,E,E,QChBA,CAAA,EAAA,OAAA,CAAkB,EAAK,SAAU,IAAI,CAAC,IAAM,EAAc,S,G,E,Q,S,C,C,C,ECK1D,EAAA,OAAA,CAJA,SAAc,CAAE,EAEd,OAAO,MAAA,CAAmB,AAAA,EAAA,SAAA,OAAA,CAAsC,GAClE,C,GCLA,AAAA,EAAA,SAAA,QAAA,CAA8C,IAAA,IAAoB,GAAA,YAAA,GAAA,EAAI,QAAQ,GAAG,KAAK,KAAK,CAAC,8O,I,E,E,S,E,E,SCK5F,GAAI,CACF,AAAA,EAAA,SAAmB,IAAI,CAAC,AAAA,IAEtB,AADA,CAAA,EAAM,EAAO,OAAO,AAAP,EACT,QAAQ,CAAC,QACb,EAAI,IAAI,CAAC,yBACX,GAAG,KAAK,CAAC,AAAA,IACP,QAAQ,KAAK,CAAC,2BAA4B,GAC1C,EA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","sources":["<anon>","node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-e2f9f4cf98e05d76.js","node_modules/@parcel/runtime-js/lib/helpers/browser/esm-js-loader.js","node_modules/@parcel/runtime-js/lib/runtime-28d90385092cb013.js","assets/js/recipes.js"],"sourcesContent":["\nfunction $parcel$export(e, n, v, s) {\n  Object.defineProperty(e, n, {get: v, set: s, enumerable: true, configurable: true});\n}\n\n      var $parcel$global = globalThis;\n    \nvar $parcel$modules = {};\nvar $parcel$inits = {};\n\nvar parcelRequire = $parcel$global[\"parcelRequire94c2\"];\n\nif (parcelRequire == null) {\n  parcelRequire = function(id) {\n    if (id in $parcel$modules) {\n      return $parcel$modules[id].exports;\n    }\n    if (id in $parcel$inits) {\n      var init = $parcel$inits[id];\n      delete $parcel$inits[id];\n      var module = {id: id, exports: {}};\n      $parcel$modules[id] = module;\n      init.call(module.exports, module, module.exports);\n      return module.exports;\n    }\n    var err = new Error(\"Cannot find module '\" + id + \"'\");\n    err.code = 'MODULE_NOT_FOUND';\n    throw err;\n  };\n\n  parcelRequire.register = function register(id, init) {\n    $parcel$inits[id] = init;\n  };\n\n  $parcel$global[\"parcelRequire94c2\"] = parcelRequire;\n}\n\nvar parcelRegister = parcelRequire.register;\nparcelRegister(\"27Lyk\", function(module, exports) {\n\n$parcel$export(module.exports, \"register\", () => $18c11f3350a906ea$export$6503ec6e8aabbaf, (v) => $18c11f3350a906ea$export$6503ec6e8aabbaf = v);\n$parcel$export(module.exports, \"resolve\", () => $18c11f3350a906ea$export$f7ad0328861e2f03, (v) => $18c11f3350a906ea$export$f7ad0328861e2f03 = v);\nvar $18c11f3350a906ea$export$6503ec6e8aabbaf;\nvar $18c11f3350a906ea$export$f7ad0328861e2f03;\n\"use strict\";\nvar $18c11f3350a906ea$var$mapping = new Map();\nfunction $18c11f3350a906ea$var$register(baseUrl, manifest) {\n    for(var i = 0; i < manifest.length - 1; i += 2)$18c11f3350a906ea$var$mapping.set(manifest[i], {\n        baseUrl: baseUrl,\n        path: manifest[i + 1]\n    });\n}\nfunction $18c11f3350a906ea$var$resolve(id) {\n    var resolved = $18c11f3350a906ea$var$mapping.get(id);\n    if (resolved == null) throw new Error('Could not resolve bundle with id ' + id);\n    return new URL(resolved.path, resolved.baseUrl).toString();\n}\n$18c11f3350a906ea$export$6503ec6e8aabbaf = $18c11f3350a906ea$var$register;\n$18c11f3350a906ea$export$f7ad0328861e2f03 = $18c11f3350a906ea$var$resolve;\n\n});\n\nparcelRegister(\"jOsMR\", function(module, exports) {\n\nvar $Gr8vk = parcelRequire(\"Gr8vk\");\nmodule.exports = $Gr8vk(\"k5KBG\").then(()=>parcelRequire('lR3v8'));\n\n});\nparcelRegister(\"Gr8vk\", function(module, exports) {\n\"use strict\";\n\nfunction $07f8f9093a769793$var$load(id) {\n    // eslint-disable-next-line no-undef\n    return import((parcelRequire(\"27Lyk\")).resolve(id));\n}\nmodule.exports = $07f8f9093a769793$var$load;\n\n});\n\n\nvar $cb28b638e06fafc9$exports = {};\n\n(parcelRequire(\"27Lyk\")).register(new URL(\"\", import.meta.url).toString(), JSON.parse(\"[\\\"iOmLm\\\",\\\"recipes.e7672a28.js\\\",\\\"k5KBG\\\",\\\"loglevel.2daa5c96.js\\\",\\\"22JMF\\\",\\\"index.20e66b64.js\\\",\\\"nZBkt\\\",\\\"index.95099fc4.js\\\",\\\"8CGZa\\\",\\\"index_0.22e893d8.js\\\"]\"));\n\n// recipes.js\n\nvar $47Mwn = parcelRequire(\"47Mwn\");\n\nvar $j3my9 = parcelRequire(\"j3my9\");\n// Import loglevel with fallback\nlet $63c7915702e03132$var$log;\n\ntry {\n    (parcelRequire(\"jOsMR\")).then((module)=>{\n        $63c7915702e03132$var$log = module.default;\n        $63c7915702e03132$var$log.setLevel(\"info\");\n        $63c7915702e03132$var$log.info(\"Recipes script started\");\n    }).catch((error)=>{\n        console.error(\"Failed to load loglevel:\", error);\n        $63c7915702e03132$var$log = console;\n        console.info(\"Recipes script started (using console as fallback)\");\n    });\n} catch (error) {\n    console.error(\"Error initializing loglevel:\", error);\n    $63c7915702e03132$var$log = console; // Final fallback\n}\n// Page Element Selection\nconst $63c7915702e03132$var$recipeName = document.getElementById(\"recipeName\");\nconst $63c7915702e03132$var$ingredients = document.getElementById(\"ingredients\");\nconst $63c7915702e03132$var$steps = document.getElementById(\"steps\");\nconst $63c7915702e03132$var$mealType = document.getElementById(\"mealType\");\nconst $63c7915702e03132$var$addRecipeBtn = document.getElementById(\"addRecipeBtn\");\nconst $63c7915702e03132$var$recipeList = document.getElementById(\"recipeList\");\nconst $63c7915702e03132$var$filterIngredient = document.getElementById(\"filterIngredient\");\nconst $63c7915702e03132$var$filterMealType = document.getElementById(\"filterMealType\");\nconst $63c7915702e03132$var$clearFilterBtn = document.getElementById(\"clearFilterBtn\");\nconst $63c7915702e03132$var$aiButton = document.getElementById(\"send-btn\");\nconst $63c7915702e03132$var$aiInput = document.getElementById(\"chat-input\");\nconst $63c7915702e03132$var$chatHistory = document.getElementById(\"chat-history\");\nconst $63c7915702e03132$var$qrBtn = document.getElementById(\"qr-btn\");\nconst $63c7915702e03132$var$signOutBttn = document.getElementById(\"signOutBttn\");\n// Check if user is signed in\nconst $63c7915702e03132$var$email = JSON.parse(localStorage.getItem(\"email\"));\nif (!$63c7915702e03132$var$email) {\n    $63c7915702e03132$var$log.warn(\"No user email found in localStorage, redirecting to login\");\n    window.location.href = \"index.html\";\n}\nlet $63c7915702e03132$var$apiKey, $63c7915702e03132$var$genAI, $63c7915702e03132$var$model;\ndocument.addEventListener(\"DOMContentLoaded\", async ()=>{\n    await $63c7915702e03132$var$getApiKey();\n    $63c7915702e03132$var$log.info(\"API Key and Generative AI initialized.\");\n    $63c7915702e03132$var$renderRecipes(); // Initial render\n});\n// Fetch API Key for Google Generative AI\nasync function $63c7915702e03132$var$getApiKey() {\n    try {\n        let snapshot = await (0, $47Mwn.getDoc)((0, $47Mwn.doc)((0, $47Mwn.db), \"apikey\", \"googlegenai\"));\n        $63c7915702e03132$var$apiKey = snapshot.data().key;\n        $63c7915702e03132$var$genAI = new (0, $j3my9.GoogleGenerativeAI)($63c7915702e03132$var$apiKey);\n        $63c7915702e03132$var$model = $63c7915702e03132$var$genAI.getGenerativeModel({\n            model: \"gemini-1.5-flash\"\n        });\n    } catch (error) {\n        $63c7915702e03132$var$log.error(\"Error fetching API key from Firestore: \", error);\n        throw error;\n    }\n}\n// Chatbot AI Response\nasync function $63c7915702e03132$var$askChatBot(request) {\n    if (!$63c7915702e03132$var$model) throw new Error(\"Generative AI model not initialized. Please wait for page load.\");\n    try {\n        const response = await $63c7915702e03132$var$model.generateContent(`Provide a recipe suggestion or answer for: ${request}. If it's a recipe query, include name, ingredients, and steps.`);\n        return response.response.text();\n    } catch (error) {\n        $63c7915702e03132$var$log.error(\"Error in askChatBot:\", error);\n        throw error;\n    }\n}\n// Sanitize Input\nfunction $63c7915702e03132$var$sanitizeInput(input) {\n    const div = document.createElement(\"div\");\n    div.textContent = input;\n    return div.innerHTML;\n}\n// Add Recipe on Click\n$63c7915702e03132$var$addRecipeBtn.addEventListener(\"click\", async ()=>{\n    const name = $63c7915702e03132$var$recipeName.value.trim();\n    const ingredientsText = $63c7915702e03132$var$ingredients.value.trim();\n    const stepsText = $63c7915702e03132$var$steps.value.trim();\n    const meal = $63c7915702e03132$var$mealType.value;\n    if (name && ingredientsText && stepsText && meal) {\n        const recipeData = {\n            name: $63c7915702e03132$var$sanitizeInput(name),\n            ingredients: $63c7915702e03132$var$sanitizeInput(ingredientsText).split(',').map((item)=>item.trim()),\n            steps: $63c7915702e03132$var$sanitizeInput(stepsText).split('\\n').map((step)=>step.trim()).filter((step)=>step),\n            mealType: meal,\n            favorite: false,\n            email: $63c7915702e03132$var$email // 加入使用者 email，讓食譜與使用者關聯\n        };\n        try {\n            await $63c7915702e03132$var$addRecipeToFirestore(recipeData);\n            $63c7915702e03132$var$renderRecipes();\n            $63c7915702e03132$var$recipeName.value = \"\";\n            $63c7915702e03132$var$ingredients.value = \"\";\n            $63c7915702e03132$var$steps.value = \"\";\n            $63c7915702e03132$var$mealType.selectedIndex = 0;\n            alert(\"Recipe added successfully!\");\n            $63c7915702e03132$var$log.info(`Recipe \"${name}\" added successfully by ${$63c7915702e03132$var$email}`);\n        } catch (error) {\n            $63c7915702e03132$var$log.error(\"Error adding recipe:\", error);\n            alert(\"Failed to add recipe. Please try again.\");\n        }\n    } else alert(\"Please fill in all recipe fields.\");\n});\n// Add Recipe on Enter\n$63c7915702e03132$var$recipeName.addEventListener(\"keypress\", function(event) {\n    if (event.key === \"Enter\") $63c7915702e03132$var$addRecipeBtn.click();\n});\n// Add Recipe to Firestore\nasync function $63c7915702e03132$var$addRecipeToFirestore(recipeData) {\n    try {\n        const docRef = await (0, $47Mwn.addDoc)((0, $47Mwn.collection)((0, $47Mwn.db), \"recipes\"), recipeData);\n        $63c7915702e03132$var$log.info(`Recipe added successfully with ID: ${docRef.id}`);\n        return docRef;\n    } catch (error) {\n        $63c7915702e03132$var$log.error(\"Error adding recipe to Firestore: \", error);\n        throw error;\n    }\n}\n// Edit Recipe\nfunction $63c7915702e03132$var$editRecipe(recipeId, recipeData) {\n    const recipeRef = (0, $47Mwn.doc)((0, $47Mwn.db), \"recipes\", recipeId);\n    (0, $47Mwn.updateDoc)(recipeRef, recipeData).then(()=>{\n        $63c7915702e03132$var$log.info(`Recipe with id ${recipeId} updated successfully.`);\n        $63c7915702e03132$var$renderRecipes();\n    }).catch((error)=>{\n        $63c7915702e03132$var$log.error(\"Error updating recipe:\", error);\n        alert(\"Failed to update recipe. Please try again.\");\n    });\n}\n// Remove Recipe\nasync function $63c7915702e03132$var$removeRecipe(recipeId) {\n    const recipeRef = (0, $47Mwn.doc)((0, $47Mwn.db), \"recipes\", recipeId);\n    try {\n        await (0, $47Mwn.deleteDoc)(recipeRef);\n        $63c7915702e03132$var$log.info(`Recipe with id ${recipeId} has been deleted from Firestore.`);\n        $63c7915702e03132$var$removeVisualRecipe(recipeId);\n    } catch (error) {\n        $63c7915702e03132$var$log.error(\"Error removing recipe: \", error);\n        alert(\"Failed to delete recipe. Please try again.\");\n    }\n}\nfunction $63c7915702e03132$var$removeVisualRecipe(recipeId) {\n    const recipeElement = document.getElementById(recipeId);\n    if (recipeElement) {\n        recipeElement.remove();\n        $63c7915702e03132$var$log.info(`Recipe with id ${recipeId} removed from the visual interface.`);\n    } else $63c7915702e03132$var$log.warn(`Recipe with id ${recipeId} not found on the page.`);\n}\n// Toggle Favorite\nfunction $63c7915702e03132$var$toggleFavorite(recipeId, currentFavorite) {\n    const recipeRef = (0, $47Mwn.doc)((0, $47Mwn.db), \"recipes\", recipeId);\n    (0, $47Mwn.updateDoc)(recipeRef, {\n        favorite: !currentFavorite\n    }).then(()=>{\n        $63c7915702e03132$var$log.info(`Favorite status toggled for recipe with id ${recipeId}.`);\n        $63c7915702e03132$var$renderRecipes();\n    }).catch((error)=>{\n        $63c7915702e03132$var$log.error(\"Error toggling favorite:\", error);\n        alert(\"Failed to toggle favorite status. Please try again.\");\n    });\n}\n// Filter Recipes\nfunction $63c7915702e03132$var$filterRecipes() {\n    const ingredientFilter = $63c7915702e03132$var$filterIngredient.value.trim().toLowerCase();\n    const mealFilter = $63c7915702e03132$var$filterMealType.value.toLowerCase();\n    (0, $47Mwn.getDocs)((0, $47Mwn.collection)((0, $47Mwn.db), \"recipes\")).then((querySnapshot)=>{\n        $63c7915702e03132$var$recipeList.innerHTML = \"\";\n        querySnapshot.forEach((doc)=>{\n            const recipe = doc.data();\n            const matchesIngredient = !ingredientFilter || recipe.ingredients.some((ing)=>ing.toLowerCase().includes(ingredientFilter));\n            const matchesMeal = !mealFilter || recipe.mealType.toLowerCase() === mealFilter;\n            const matchesUser = recipe.email === $63c7915702e03132$var$email; // 只顯示當前使用者的食譜\n            if (matchesIngredient && matchesMeal && matchesUser) $63c7915702e03132$var$renderRecipe(doc.id, recipe);\n        });\n    }).catch((error)=>{\n        $63c7915702e03132$var$log.error(\"Error filtering recipes:\", error);\n        alert(\"Failed to filter recipes. Please try again.\");\n    });\n}\n// Clear Filters\n$63c7915702e03132$var$clearFilterBtn.addEventListener(\"click\", ()=>{\n    $63c7915702e03132$var$filterIngredient.value = \"\";\n    $63c7915702e03132$var$filterMealType.value = \"\";\n    $63c7915702e03132$var$renderRecipes();\n});\n// Render Recipes\nasync function $63c7915702e03132$var$renderRecipes() {\n    const recipes = await $63c7915702e03132$var$getRecipesFromFirestore();\n    $63c7915702e03132$var$recipeList.innerHTML = \"\";\n    recipes.forEach((recipe)=>{\n        $63c7915702e03132$var$renderRecipe(recipe.id, recipe.data());\n    });\n}\nfunction $63c7915702e03132$var$renderRecipe(recipeId, recipeData) {\n    const recipeItem = document.createElement(\"li\");\n    recipeItem.id = recipeId;\n    recipeItem.tabIndex = 0;\n    recipeItem.innerHTML = `\n    <span>${recipeData.name} (${recipeData.mealType})</span>\n    <span class=\"actions\">\n      <button onclick=\"editRecipe('${recipeId}', { name: prompt('New name:', '${recipeData.name}'), mealType: prompt('New meal type:', '${recipeData.mealType}') })\">Edit</button>\n      <button onclick=\"removeRecipe('${recipeId}')\">Delete</button>\n      <button onclick=\"toggleFavorite('${recipeId}', ${recipeData.favorite || false})\">${recipeData.favorite ? 'Unfavorite' : 'Favorite'}</button>\n    </span>\n  `;\n    $63c7915702e03132$var$recipeList.appendChild(recipeItem);\n}\n// Get Recipes from Firestore\nasync function $63c7915702e03132$var$getRecipesFromFirestore() {\n    const data = await (0, $47Mwn.getDocs)((0, $47Mwn.collection)((0, $47Mwn.db), \"recipes\"));\n    let userData = [];\n    data.forEach((doc)=>{\n        if (doc.data().email === $63c7915702e03132$var$email) userData.push(doc);\n    });\n    return userData;\n}\n// Add Event Listeners for Filters\n$63c7915702e03132$var$filterIngredient.addEventListener(\"input\", $63c7915702e03132$var$filterRecipes);\n$63c7915702e03132$var$filterMealType.addEventListener(\"change\", $63c7915702e03132$var$filterRecipes);\n// Expose Functions to Global Scope (for onclick events)\nwindow.editRecipe = $63c7915702e03132$var$editRecipe;\nwindow.removeRecipe = $63c7915702e03132$var$removeRecipe;\nwindow.toggleFavorite = $63c7915702e03132$var$toggleFavorite;\n// Chatbot - Rule-based Logic\nfunction $63c7915702e03132$var$ruleChatBot(request) {\n    if (request.startsWith(\"add recipe\")) {\n        let recipeName = request.replace(\"add recipe\", \"\").trim();\n        if (recipeName) {\n            const recipeData = {\n                name: recipeName,\n                ingredients: [],\n                steps: [],\n                mealType: \"Dinner\",\n                favorite: false,\n                email: $63c7915702e03132$var$email\n            };\n            $63c7915702e03132$var$addRecipeToFirestore(recipeData);\n            $63c7915702e03132$var$appendMessage(`Recipe ${recipeName} added!`);\n            $63c7915702e03132$var$renderRecipes();\n        } else $63c7915702e03132$var$appendMessage(\"Please specify a recipe name to add.\");\n        return true;\n    } else if (request.startsWith(\"complete\")) {\n        let recipeName = request.replace(\"complete\", \"\").trim();\n        if (recipeName) {\n            if ($63c7915702e03132$var$removeFromRecipeName(recipeName)) {\n                $63c7915702e03132$var$appendMessage(`Recipe ${recipeName} marked as complete.`);\n                $63c7915702e03132$var$renderRecipes();\n            } else $63c7915702e03132$var$appendMessage(\"Recipe not found!\");\n        } else $63c7915702e03132$var$appendMessage(\"Please specify a recipe to complete.\");\n        return true;\n    } else if (request.startsWith(\"find recipes with\")) {\n        let ingredient = request.replace(\"find recipes with\", \"\").trim();\n        if (ingredient) {\n            $63c7915702e03132$var$filterRecipesByIngredient(ingredient);\n            $63c7915702e03132$var$appendMessage(`Finding recipes with ${ingredient}...`);\n        } else $63c7915702e03132$var$appendMessage(\"Please specify an ingredient.\");\n        return true;\n    }\n    return false;\n}\n// Filter Recipes by Ingredient\nfunction $63c7915702e03132$var$filterRecipesByIngredient(ingredient) {\n    $63c7915702e03132$var$filterIngredient.value = ingredient;\n    $63c7915702e03132$var$filterRecipes();\n}\n// Chatbot - Remove Recipe by Name\nfunction $63c7915702e03132$var$removeFromRecipeName(recipeName) {\n    const recipes = $63c7915702e03132$var$recipeList.getElementsByTagName(\"li\");\n    let found = false;\n    for (let recipe of recipes){\n        const recipeText = recipe.querySelector(\"span:first-child\").textContent.trim().split(\" (\")[0];\n        if (recipeText.toLowerCase() === recipeName.toLowerCase()) {\n            $63c7915702e03132$var$removeRecipe(recipe.id);\n            $63c7915702e03132$var$removeVisualRecipe(recipe.id);\n            found = true;\n        }\n    }\n    return found;\n}\n// Chatbot - Send Button Click Event\n$63c7915702e03132$var$aiButton.addEventListener('click', async ()=>{\n    let prompt = $63c7915702e03132$var$aiInput.value.trim().toLowerCase();\n    if (prompt) try {\n        if (!$63c7915702e03132$var$ruleChatBot(prompt)) {\n            const response = await $63c7915702e03132$var$askChatBot(prompt);\n            $63c7915702e03132$var$appendMessage(response);\n        }\n    } catch (error) {\n        $63c7915702e03132$var$log.error(\"Error processing AI request:\", error);\n        $63c7915702e03132$var$appendMessage(\"Error: Could not process your request.\");\n    }\n    else $63c7915702e03132$var$appendMessage(\"Please enter a prompt\");\n});\n// Chatbot - Add Message to Chat History\nfunction $63c7915702e03132$var$appendMessage(message) {\n    let history = document.createElement(\"div\");\n    history.textContent = message;\n    history.className = 'history';\n    $63c7915702e03132$var$chatHistory.appendChild(history);\n    $63c7915702e03132$var$aiInput.value = \"\";\n}\n// QR Code Generation\n$63c7915702e03132$var$qrBtn.addEventListener('click', ()=>{\n    const qrCodeUrl = 'https://pei-tong.github.io/Recipe-Organizer-PWA/';\n    const qrCodeWindow = window.open(`https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${encodeURIComponent(qrCodeUrl)}`, '_blank');\n    if (!qrCodeWindow) alert(\"Please allow popups to generate QR code.\");\n});\n// Sign Out\n$63c7915702e03132$var$signOutBttn.addEventListener(\"click\", ()=>{\n    localStorage.removeItem(\"email\"); // 移除使用者 email\n    $63c7915702e03132$var$log.info(\"User signed out\");\n    window.location.href = \"index.html\";\n});\n\n\n//# sourceMappingURL=recipes.e7672a28.js.map\n","\"use strict\";\n\nvar mapping = new Map();\nfunction register(baseUrl, manifest) {\n  for (var i = 0; i < manifest.length - 1; i += 2) {\n    mapping.set(manifest[i], {\n      baseUrl: baseUrl,\n      path: manifest[i + 1]\n    });\n  }\n}\nfunction resolve(id) {\n  var resolved = mapping.get(id);\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n  return new URL(resolved.path, resolved.baseUrl).toString();\n}\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","let load = require('./helpers/browser/esm-js-loader');\nmodule.exports = (load(\"k5KBG\")).then(() => parcelRequire('lR3v8'));","\"use strict\";\n\nfunction load(id) {\n  // eslint-disable-next-line no-undef\n  return __parcel__import__(require('../bundle-manifest').resolve(id));\n}\nmodule.exports = load;","require('./helpers/bundle-manifest').register(new __parcel__URL__(\"\").toString(),JSON.parse(\"[\\\"iOmLm\\\",\\\"recipes.e7672a28.js\\\",\\\"k5KBG\\\",\\\"loglevel.2daa5c96.js\\\",\\\"22JMF\\\",\\\"index.20e66b64.js\\\",\\\"nZBkt\\\",\\\"index.95099fc4.js\\\",\\\"8CGZa\\\",\\\"index_0.22e893d8.js\\\"]\"));","// recipes.js\r\nimport { db, getDocs, addDoc, collection, deleteDoc, doc, getDoc, updateDoc } from \"./firebase.js\";\r\n\r\n// Import loglevel with fallback\r\nlet log;\r\ntry {\r\n  import(\"loglevel\").then(module => {\r\n    log = module.default;\r\n    log.setLevel(\"info\");\r\n    log.info(\"Recipes script started\");\r\n  }).catch(error => {\r\n    console.error(\"Failed to load loglevel:\", error);\r\n    log = console;\r\n    console.info(\"Recipes script started (using console as fallback)\");\r\n  });\r\n} catch (error) {\r\n  console.error(\"Error initializing loglevel:\", error);\r\n  log = console; // Final fallback\r\n}\r\n\r\n// Import Google Generative AI\r\nimport { GoogleGenerativeAI } from '@google/generative-ai';\r\n\r\n// Page Element Selection\r\nconst recipeName = document.getElementById(\"recipeName\");\r\nconst ingredients = document.getElementById(\"ingredients\");\r\nconst steps = document.getElementById(\"steps\");\r\nconst mealType = document.getElementById(\"mealType\");\r\nconst addRecipeBtn = document.getElementById(\"addRecipeBtn\");\r\nconst recipeList = document.getElementById(\"recipeList\");\r\nconst filterIngredient = document.getElementById(\"filterIngredient\");\r\nconst filterMealType = document.getElementById(\"filterMealType\");\r\nconst clearFilterBtn = document.getElementById(\"clearFilterBtn\");\r\nconst aiButton = document.getElementById(\"send-btn\");\r\nconst aiInput = document.getElementById(\"chat-input\");\r\nconst chatHistory = document.getElementById(\"chat-history\");\r\nconst qrBtn = document.getElementById(\"qr-btn\");\r\nconst signOutBttn = document.getElementById(\"signOutBttn\");\r\n\r\n// Check if user is signed in\r\nconst email = JSON.parse(localStorage.getItem(\"email\"));\r\nif (!email) {\r\n  log.warn(\"No user email found in localStorage, redirecting to login\");\r\n  window.location.href = \"index.html\";\r\n}\r\n\r\nlet apiKey, genAI, model;\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", async () => {\r\n  await getApiKey();\r\n  log.info(\"API Key and Generative AI initialized.\");\r\n  renderRecipes(); // Initial render\r\n});\r\n\r\n// Fetch API Key for Google Generative AI\r\nasync function getApiKey() {\r\n  try {\r\n    let snapshot = await getDoc(doc(db, \"apikey\", \"googlegenai\"));\r\n    apiKey = snapshot.data().key;\r\n    genAI = new GoogleGenerativeAI(apiKey);\r\n    model = genAI.getGenerativeModel({ model: \"gemini-1.5-flash\" });\r\n  } catch (error) {\r\n    log.error(\"Error fetching API key from Firestore: \", error);\r\n    throw error;\r\n  }\r\n}\r\n\r\n// Chatbot AI Response\r\nasync function askChatBot(request) {\r\n  if (!model) {\r\n    throw new Error(\"Generative AI model not initialized. Please wait for page load.\");\r\n  }\r\n  try {\r\n    const response = await model.generateContent(`Provide a recipe suggestion or answer for: ${request}. If it's a recipe query, include name, ingredients, and steps.`);\r\n    return response.response.text();\r\n  } catch (error) {\r\n    log.error(\"Error in askChatBot:\", error);\r\n    throw error;\r\n  }\r\n}\r\n\r\n// Sanitize Input\r\nfunction sanitizeInput(input) {\r\n  const div = document.createElement(\"div\");\r\n  div.textContent = input;\r\n  return div.innerHTML;\r\n}\r\n\r\n// Add Recipe on Click\r\naddRecipeBtn.addEventListener(\"click\", async () => {\r\n  const name = recipeName.value.trim();\r\n  const ingredientsText = ingredients.value.trim();\r\n  const stepsText = steps.value.trim();\r\n  const meal = mealType.value;\r\n\r\n  if (name && ingredientsText && stepsText && meal) {\r\n    const recipeData = {\r\n      name: sanitizeInput(name),\r\n      ingredients: sanitizeInput(ingredientsText).split(',').map(item => item.trim()),\r\n      steps: sanitizeInput(stepsText).split('\\n').map(step => step.trim()).filter(step => step),\r\n      mealType: meal,\r\n      favorite: false,\r\n      email: email // 加入使用者 email，讓食譜與使用者關聯\r\n    };\r\n\r\n    try {\r\n      await addRecipeToFirestore(recipeData);\r\n      renderRecipes();\r\n      recipeName.value = \"\";\r\n      ingredients.value = \"\";\r\n      steps.value = \"\";\r\n      mealType.selectedIndex = 0;\r\n      alert(\"Recipe added successfully!\");\r\n      log.info(`Recipe \"${name}\" added successfully by ${email}`);\r\n    } catch (error) {\r\n      log.error(\"Error adding recipe:\", error);\r\n      alert(\"Failed to add recipe. Please try again.\");\r\n    }\r\n  } else {\r\n    alert(\"Please fill in all recipe fields.\");\r\n  }\r\n});\r\n\r\n// Add Recipe on Enter\r\nrecipeName.addEventListener(\"keypress\", function(event) {\r\n  if (event.key === \"Enter\") {\r\n    addRecipeBtn.click();\r\n  }\r\n});\r\n\r\n// Add Recipe to Firestore\r\nasync function addRecipeToFirestore(recipeData) {\r\n  try {\r\n    const docRef = await addDoc(collection(db, \"recipes\"), recipeData);\r\n    log.info(`Recipe added successfully with ID: ${docRef.id}`);\r\n    return docRef;\r\n  } catch (error) {\r\n    log.error(\"Error adding recipe to Firestore: \", error);\r\n    throw error;\r\n  }\r\n}\r\n\r\n// Edit Recipe\r\nfunction editRecipe(recipeId, recipeData) {\r\n  const recipeRef = doc(db, \"recipes\", recipeId);\r\n  updateDoc(recipeRef, recipeData)\r\n    .then(() => {\r\n      log.info(`Recipe with id ${recipeId} updated successfully.`);\r\n      renderRecipes();\r\n    })\r\n    .catch(error => {\r\n      log.error(\"Error updating recipe:\", error);\r\n      alert(\"Failed to update recipe. Please try again.\");\r\n    });\r\n}\r\n\r\n// Remove Recipe\r\nasync function removeRecipe(recipeId) {\r\n  const recipeRef = doc(db, \"recipes\", recipeId);\r\n  try {\r\n    await deleteDoc(recipeRef);\r\n    log.info(`Recipe with id ${recipeId} has been deleted from Firestore.`);\r\n    removeVisualRecipe(recipeId);\r\n  } catch (error) {\r\n    log.error(\"Error removing recipe: \", error);\r\n    alert(\"Failed to delete recipe. Please try again.\");\r\n  }\r\n}\r\n\r\nfunction removeVisualRecipe(recipeId) {\r\n  const recipeElement = document.getElementById(recipeId);\r\n  if (recipeElement) {\r\n    recipeElement.remove();\r\n    log.info(`Recipe with id ${recipeId} removed from the visual interface.`);\r\n  } else {\r\n    log.warn(`Recipe with id ${recipeId} not found on the page.`);\r\n  }\r\n}\r\n\r\n// Toggle Favorite\r\nfunction toggleFavorite(recipeId, currentFavorite) {\r\n  const recipeRef = doc(db, \"recipes\", recipeId);\r\n  updateDoc(recipeRef, { favorite: !currentFavorite })\r\n    .then(() => {\r\n      log.info(`Favorite status toggled for recipe with id ${recipeId}.`);\r\n      renderRecipes();\r\n    })\r\n    .catch(error => {\r\n      log.error(\"Error toggling favorite:\", error);\r\n      alert(\"Failed to toggle favorite status. Please try again.\");\r\n    });\r\n}\r\n\r\n// Filter Recipes\r\nfunction filterRecipes() {\r\n  const ingredientFilter = filterIngredient.value.trim().toLowerCase();\r\n  const mealFilter = filterMealType.value.toLowerCase();\r\n\r\n  getDocs(collection(db, \"recipes\"))\r\n    .then((querySnapshot) => {\r\n      recipeList.innerHTML = \"\";\r\n      querySnapshot.forEach((doc) => {\r\n        const recipe = doc.data();\r\n        const matchesIngredient = !ingredientFilter || recipe.ingredients.some(ing => ing.toLowerCase().includes(ingredientFilter));\r\n        const matchesMeal = !mealFilter || recipe.mealType.toLowerCase() === mealFilter;\r\n        const matchesUser = recipe.email === email; // 只顯示當前使用者的食譜\r\n\r\n        if (matchesIngredient && matchesMeal && matchesUser) {\r\n          renderRecipe(doc.id, recipe);\r\n        }\r\n      });\r\n    })\r\n    .catch(error => {\r\n      log.error(\"Error filtering recipes:\", error);\r\n      alert(\"Failed to filter recipes. Please try again.\");\r\n    });\r\n}\r\n\r\n// Clear Filters\r\nclearFilterBtn.addEventListener(\"click\", () => {\r\n  filterIngredient.value = \"\";\r\n  filterMealType.value = \"\";\r\n  renderRecipes();\r\n});\r\n\r\n// Render Recipes\r\nasync function renderRecipes() {\r\n  const recipes = await getRecipesFromFirestore();\r\n  recipeList.innerHTML = \"\";\r\n  \r\n  recipes.forEach((recipe) => {\r\n    renderRecipe(recipe.id, recipe.data());\r\n  });\r\n}\r\n\r\nfunction renderRecipe(recipeId, recipeData) {\r\n  const recipeItem = document.createElement(\"li\");\r\n  recipeItem.id = recipeId;\r\n  recipeItem.tabIndex = 0;\r\n\r\n  recipeItem.innerHTML = `\r\n    <span>${recipeData.name} (${recipeData.mealType})</span>\r\n    <span class=\"actions\">\r\n      <button onclick=\"editRecipe('${recipeId}', { name: prompt('New name:', '${recipeData.name}'), mealType: prompt('New meal type:', '${recipeData.mealType}') })\">Edit</button>\r\n      <button onclick=\"removeRecipe('${recipeId}')\">Delete</button>\r\n      <button onclick=\"toggleFavorite('${recipeId}', ${recipeData.favorite || false})\">${recipeData.favorite ? 'Unfavorite' : 'Favorite'}</button>\r\n    </span>\r\n  `;\r\n  recipeList.appendChild(recipeItem);\r\n}\r\n\r\n// Get Recipes from Firestore\r\nasync function getRecipesFromFirestore() {\r\n  const data = await getDocs(collection(db, \"recipes\"));\r\n  let userData = [];\r\n  \r\n  data.forEach((doc) => {\r\n    if (doc.data().email === email) { // 只返回當前使用者的食譜\r\n      userData.push(doc);\r\n    }\r\n  });\r\n  \r\n  return userData;\r\n}\r\n\r\n// Add Event Listeners for Filters\r\nfilterIngredient.addEventListener(\"input\", filterRecipes);\r\nfilterMealType.addEventListener(\"change\", filterRecipes);\r\n\r\n// Expose Functions to Global Scope (for onclick events)\r\nwindow.editRecipe = editRecipe;\r\nwindow.removeRecipe = removeRecipe;\r\nwindow.toggleFavorite = toggleFavorite;\r\n\r\n// Chatbot - Rule-based Logic\r\nfunction ruleChatBot(request) {\r\n  if (request.startsWith(\"add recipe\")) {\r\n    let recipeName = request.replace(\"add recipe\", \"\").trim();\r\n    if (recipeName) {\r\n      const recipeData = { name: recipeName, ingredients: [], steps: [], mealType: \"Dinner\", favorite: false, email: email };\r\n      addRecipeToFirestore(recipeData);\r\n      appendMessage(`Recipe ${recipeName} added!`);\r\n      renderRecipes();\r\n    } else {\r\n      appendMessage(\"Please specify a recipe name to add.\");\r\n    }\r\n    return true;\r\n  } else if (request.startsWith(\"complete\")) {\r\n    let recipeName = request.replace(\"complete\", \"\").trim();\r\n    if (recipeName) {\r\n      if (removeFromRecipeName(recipeName)) {\r\n        appendMessage(`Recipe ${recipeName} marked as complete.`);\r\n        renderRecipes();\r\n      } else {\r\n        appendMessage(\"Recipe not found!\");\r\n      }\r\n    } else {\r\n      appendMessage(\"Please specify a recipe to complete.\");\r\n    }\r\n    return true;\r\n  } else if (request.startsWith(\"find recipes with\")) {\r\n    let ingredient = request.replace(\"find recipes with\", \"\").trim();\r\n    if (ingredient) {\r\n      filterRecipesByIngredient(ingredient);\r\n      appendMessage(`Finding recipes with ${ingredient}...`);\r\n    } else {\r\n      appendMessage(\"Please specify an ingredient.\");\r\n    }\r\n    return true;\r\n  }\r\n  return false;\r\n}\r\n\r\n// Filter Recipes by Ingredient\r\nfunction filterRecipesByIngredient(ingredient) {\r\n  filterIngredient.value = ingredient;\r\n  filterRecipes();\r\n}\r\n\r\n// Chatbot - Remove Recipe by Name\r\nfunction removeFromRecipeName(recipeName) {\r\n  const recipes = recipeList.getElementsByTagName(\"li\");\r\n  let found = false;\r\n  for (let recipe of recipes) {\r\n    const recipeText = recipe.querySelector(\"span:first-child\").textContent.trim().split(\" (\")[0];\r\n    if (recipeText.toLowerCase() === recipeName.toLowerCase()) {\r\n      removeRecipe(recipe.id);\r\n      removeVisualRecipe(recipe.id);\r\n      found = true;\r\n    }\r\n  }\r\n  return found;\r\n}\r\n\r\n// Chatbot - Send Button Click Event\r\naiButton.addEventListener('click', async () => {\r\n  let prompt = aiInput.value.trim().toLowerCase();\r\n  if (prompt) {\r\n    try {\r\n      if (!ruleChatBot(prompt)) {\r\n        const response = await askChatBot(prompt);\r\n        appendMessage(response);\r\n      }\r\n    } catch (error) {\r\n      log.error(\"Error processing AI request:\", error);\r\n      appendMessage(\"Error: Could not process your request.\");\r\n    }\r\n  } else {\r\n    appendMessage(\"Please enter a prompt\");\r\n  }\r\n});\r\n\r\n// Chatbot - Add Message to Chat History\r\nfunction appendMessage(message) {\r\n  let history = document.createElement(\"div\");\r\n  history.textContent = message;\r\n  history.className = 'history';\r\n  chatHistory.appendChild(history);\r\n  aiInput.value = \"\";\r\n}\r\n\r\n// QR Code Generation\r\nqrBtn.addEventListener('click', () => {\r\n  const qrCodeUrl = 'https://pei-tong.github.io/Recipe-Organizer-PWA/';\r\n  const qrCodeWindow = window.open(`https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${encodeURIComponent(qrCodeUrl)}`, '_blank');\r\n  if (!qrCodeWindow) {\r\n    alert(\"Please allow popups to generate QR code.\");\r\n  }\r\n});\r\n\r\n// Sign Out\r\nsignOutBttn.addEventListener(\"click\", () => {\r\n  localStorage.removeItem(\"email\"); // 移除使用者 email\r\n  log.info(\"User signed out\");\r\n  window.location.href = \"index.html\";\r\n});"],"names":["$63c7915702e03132$var$log","$63c7915702e03132$var$apiKey","$63c7915702e03132$var$model","$parcel$export","e","n","v","s","Object","defineProperty","get","set","enumerable","configurable","$parcel$global","globalThis","$parcel$modules","$parcel$inits","parcelRequire","id","exports","init","module","call","err","Error","code","register","parcelRegister","$18c11f3350a906ea$export$6503ec6e8aabbaf","$18c11f3350a906ea$export$f7ad0328861e2f03","$18c11f3350a906ea$var$mapping","Map","baseUrl","manifest","i","length","path","resolved","URL","toString","$Gr8vk","then","resolve","url","JSON","parse","$47Mwn","$j3my9","default","setLevel","info","catch","error","console","$63c7915702e03132$var$recipeName","document","getElementById","$63c7915702e03132$var$ingredients","$63c7915702e03132$var$steps","$63c7915702e03132$var$mealType","$63c7915702e03132$var$addRecipeBtn","$63c7915702e03132$var$recipeList","$63c7915702e03132$var$filterIngredient","$63c7915702e03132$var$filterMealType","$63c7915702e03132$var$clearFilterBtn","$63c7915702e03132$var$aiButton","$63c7915702e03132$var$aiInput","$63c7915702e03132$var$chatHistory","$63c7915702e03132$var$qrBtn","$63c7915702e03132$var$signOutBttn","$63c7915702e03132$var$email","localStorage","getItem","$63c7915702e03132$var$getApiKey","snapshot","getDoc","doc","db","data","key","$63c7915702e03132$var$genAI","GoogleGenerativeAI","getGenerativeModel","model","$63c7915702e03132$var$askChatBot","request","response","generateContent","text","$63c7915702e03132$var$sanitizeInput","input","div","createElement","textContent","innerHTML","$63c7915702e03132$var$addRecipeToFirestore","recipeData","docRef","addDoc","collection","$63c7915702e03132$var$removeRecipe","recipeId","recipeRef","deleteDoc","$63c7915702e03132$var$removeVisualRecipe","alert","recipeElement","remove","warn","$63c7915702e03132$var$filterRecipes","ingredientFilter","value","trim","toLowerCase","mealFilter","getDocs","querySnapshot","forEach","recipe","matchesIngredient","ingredients","some","ing","includes","matchesMeal","mealType","matchesUser","email","$63c7915702e03132$var$renderRecipe","$63c7915702e03132$var$renderRecipes","recipes","$63c7915702e03132$var$getRecipesFromFirestore","recipeItem","tabIndex","name","favorite","appendChild","userData","push","$63c7915702e03132$var$appendMessage","message","history","className","window","location","href","addEventListener","ingredientsText","stepsText","meal","split","map","item","steps","step","filter","selectedIndex","event","click","editRecipe","updateDoc","removeRecipe","toggleFavorite","currentFavorite","prompt","$63c7915702e03132$var$ruleChatBot","startsWith","recipeName","replace","$63c7915702e03132$var$removeFromRecipeName","getElementsByTagName","found","recipeText","querySelector","ingredient","open","encodeURIComponent","removeItem"],"version":3,"file":"recipes.e7672a28.js.map"}